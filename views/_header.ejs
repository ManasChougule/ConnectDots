<header id="layout-header">
  <nav class="navbar navbar-expand-lg bg-primary shadow-sm py-2">
    <div class="container-fluid">

      <!-- Brand -->
      <a class="navbar-brand text-white fw-bold" href="/">ConnectDots</a>

      <!-- Mobile burger -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
              data-bs-target="#mainNav" aria-controls="mainNav"
              aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Collapsible nav links -->
      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-3 fw-semibold">

          <% if (locals.user) { %>
            <li class="nav-item"><a class="nav-link text-white" href="/users/allUsers/">Users</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="/friends/allFriends/">Friends</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="/friends/close-friends/">Close Friends</a></li>

            <!-- Notifications -->
            <li class="nav-item position-relative">
              <a class="nav-link text-white" href="/users/allNotifications/">
                Notifications
                <% if (user?.countOfNewlyReceivedNotifications) { %>
                  <span class="position-absolute top-1 start-80 translate-middle badge rounded-pill bg-danger">
                    <%= user.countOfNewlyReceivedNotifications %>
                  </span>
                <% } %>
              </a>
            </li>

            <!-- Friend Requests -->
            <li class="nav-item position-relative">
              <a class="nav-link text-white" href="/users/pending-friend-requests/">
                Friend Requests
                <% if (user?.totalFriendRequestsReceived) { %>
                  <span class="position-absolute top-1 start-80 translate-middle badge rounded-pill bg-danger">
                    <%= user.totalFriendRequestsReceived %>
                  </span>
                <% } %>
              </a>
            </li>

            <li class="nav-item"><a class="nav-link text-white" href="/users/profile/<%= user.id %>"><%= user.name %></a></li>
            <li class="nav-item"><a class="nav-link text-white" href="/users/sign-out">Sign Out</a></li>

          <% } else { %>
            <li class="nav-item"><a class="nav-link text-white" href="/users/sign-in">Sign In</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="/users/sign-up">Sign Up</a></li>
          <% } %>

        </ul>
      </div>
    </div>
  </nav>
</header>